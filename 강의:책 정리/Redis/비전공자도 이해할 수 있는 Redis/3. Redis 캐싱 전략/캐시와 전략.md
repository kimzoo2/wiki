### 캐시란?
자주 사용하는 데이터를 보다 빠르게 조회할 수 있는 임시 저장소다.

### 캐시 전략
#### Cache aside 전략
- 캐시 서버에 데이터를 먼저 조회하고 없는 경우 데이터베이스에 요청하는 방식이다.

### Write around 전략
- cache aside 전략과 자주 사용된다.
- 데이터를 저장할 때 **DB에만 저장**하는 방식이다. 
	- 레디스에 데이터가 없으면 DB로부터 데이터를 조회해서 레디스에 저장하는 방식이다.

### Cache aside와 Write around 한계점
- 데이터 일관성을 보장할 수 없다.
	- 즉, 캐시 데이터와 DB 데이터가 일치하지 않는다. DB만 업데이트 하기 때문이다.
- 캐시에 저장할 수 있는 공간이 적다.

### 해결 방법은?
1. **데이터 일관성 보장할 수 없다.**
- Write through 방식을 적용하는 것은 성능이 저하되는 문제점이 생긴다.
- 그렇기 때문에 일관성을 포기하고 성능을 취한 결과이기 때문에 적용시키기에 **적합한 데이터를 골라서 적용**한다.
	- 자주 조회되는 데이터
	- 잘 변하지 않는 데이터
	- 실시간으로 정확히 일치하지 않아도 되는 데이터

- 그래도 데이터가 장기간 저장되지 않는건 문제가 될 수도 있다. 그래서 **사용하는 것이 TTL**이다.

2. **캐시 저장 공간이 적다.**
- TTL을 통해 캐시 공간을 효율적으로 사용한다.

### 캐싱으로 조회 성능 개선 전 먼저 해야 할 것들
**성능 개선 방법들**
- SQL 튜닝
- 캐싱 서버 활용
- 레플리케이션
- 샤딩
- DB 스케일업

#### 가장 먼저 SQL 튜닝을 고려해라
1. SQL 튜닝을 제외한 방법은 추가적인 비용이 든다. 기존 시스템 변경 없이 개선할 수 있다.
2. 근본적인 문제를 해결하는 방법이 SQL 튜닝일 가능성이 높다.

### 즉, 가성비가 좋은 것이 SQL 튜닝이다.