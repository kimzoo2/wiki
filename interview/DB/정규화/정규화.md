- 최악이야..

## 정규화란?
- 데이터의 **중복을 줄이고** **insert, update, delete의 이상 현상을 최소화**하고 **무결성을 높이기** 위해 **테이블을 분해**하는 방식이다.
- **3NF**까지 도달하면 정규화 됐다고 말하기도 함.
- 보통 실무에서는 3NF, BCNF까지 진행(많이 해도 4NF까지만 한다)

**1. 삽입 이상** 
데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제

**2. 갱신 이상**
중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 문제

**3. 삭제 이상**
튜플을 삭제하면 꼭 필요한 데이터까지 같이 삭제되는 데이터 손실 문제

### 제 1 정규화
- 테이블의 **컬럼이 원자값을 갖도록 테이블을 분해**하는 것이다.

#### **AS-IS**
![[스크린샷 2024-09-03 오후 1.47.27.png]]

#### TO-BE
![[스크린샷 2024-09-03 오후 1.47.47.png]]

-> 하지만 **많은 중복**이 생겼다. 똑같은 **account_id**를 가진 튜플이 발생해서 primary key도 새로 잡아줘야 한다.
![[스크린샷 2024-09-03 오후 1.48.42.png]]

### 제 2 정규화 (완전 함수적 종속)
- **완전 함수적 종속**하도록 테이블을 분해하기 (기본키 일부에 대해 부분 종속하면 안 됨)
	- 부분이 다른 컬럼을 종속하지 않도록 제거한 것.
- **부분 함수 종속**을 제거한다. 부분 함수 종속이란 기본키 중에 특정 컬럼에만 종속되는 것을 의미한다.

![[스크린샷 2024-09-03 오후 1.55.02.png]]
#### **TO-BE** : 2NF 중복 제거해도 **중복된 데이터**가 보인다.
![[스크린샷 2024-09-03 오후 1.58.03.png]]

### 제 3 정규화
- 2NF를 만족한 테이블에 대해 **이행적 종속**을 없애도록 테이블을 분해한다. 릴레이션에 3개의 속성이 있을 때 X -> Y, Y-> Z란 종속 관계가 있는 경우, X -> Z를 성립할 때 이행적 함수 종속이라고 합니다.
![[스크린샷 2024-09-03 오후 8.41.10.png]]
#### BCNF 정규화
- 결정자가 후보키가 아닌 함수 종속을 제거한다.

### 반정규화란?
- 정규화를 통해서 테이블을 분해하면 **join 연산이 증가하고 쿼리가 복잡**해질 수 있다. 이를 해결하기 위해 데이터의 중복을 허용하는 것이 반정규화다. 테이블을 부러 비정규화하여 성능을 향상시킨다.



### 슈퍼 키
- 유니크하게 튜플을 식별할 수 있는 키
### (candidate) 키
- 어느 한 attribute를 제거했을 때 유니크하게 튜플을 식별할 수 없는 슈퍼 키
- ex) account_id -> 식별도 가능하고 키도 하나이기 때문에 제거하면 식별할 수 없어셔져서 candidate key도 된다
### pk
- 튜플들을 유니크하게 식별하려고 선택된 (candidate) 키

### prime attribute
- 임의의 (candidate) key에 속하는 attribute

non-prime attribute
- 어떠한 (candidate) key에 속하지 않는 attribute