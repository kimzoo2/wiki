### Volatile이란?
- **가시성을 보장하는 키워드**이다. 공유 변수가 CPU의 캐시를 가져오기 때문에 캐시가 아니라 메인 메모리에 접근하여 가시성을 보장한다.

#### Volatile 키워드로 선언해도 문제가 생길까?
- [[race condition]] 문제가 발생한다.
- 연산이 나누어질 수 있는 **복합 연산 (+=)일 때**, 다른 스레드가 값을 변경할 수 있어서 [[race condition]] 문제가 발생한다.


경쟁상태(race condition)을 방지하는 방법
- 원자성과 가시성을 보장해야 한다.

### 원자성이란?
- **공유 자원**에 대한 **작업 단위**가 더 이상 쪼개질 수 없는 **하나의 연산처럼 작동**하는 것

**read-modify-write** 예제
- 값 조회
- 변경하고
- 쓰기
-> 조회하고 변경하는 사이에 다른 쓰레드가 간섭할 수 있기 때문에 원자성이 보장되지 않는다.

### 가시성
- **메인 메모리와 cpu 캐시의 값 불일치로 발생하는 문제를 해결**해줍니다. **메모리의 데이터를 읽어오는 것**입니다,

### Atomic 클래스
- CAS 알고리즘으로 Lock 없이 동시성 문제를 해결해줍니다.
- CAS(Compare And Swap)읠 의미합니다.
	- **쓰레드의 저장된 값이 메인 메모리와 일치**한다면 **swap**하고 **일치하지 않으면 작업이 취소**되고 다시 retry 하여 원자성과 가시성을 보장합니다.