
## 스프링에서 AOP란 무엇인가요?
- 관점 지향 프로그래밍을 의미하는 AOP는, **핵심적인 관심사**와 **공통 관심사를 분리**시켜 **모듈화하는 것**입니다.
- 따라서 핵심 기능의 코드를 수정하지 않으면서 **부가 기능을 구현**할 수 있습니다.

### AOP와 프록시의 주의점
- 관점 지향 프로그래밍인 AOP는 **핵심사와 공통기능을 분리**하는데 목적이 있습니다. 
- 이를 위해 **대리자를 두는 프록시가 활용**되었습니다. 프록시 패턴은 대리자 객체를 두어 안에서 타겟 클래스를 호출하는 형태로 구현됩니다. 이를 통해 대리자에 부가 기능을 구현하여 공통 관심사를 추출할 수 있게 되었습니다. **타겟 클래스의 변경 없이도 부가 기능을 추가**할 수 있다는 장점이 있지만, **private 메소드는 프록시 객체 적용이 불가**하다는 주의사항이 존재합니다.

jdk dynamic proxy - interface
cglib - interface 없을 때 사용한다


#### 스프링의 AOP 구현 기술
프록시 기반 aop와 **바이트 코드 조작**을 통해 aop를 하는 AspectJ 방식입니다.
- 스프링은 **dynamic jdk proxy**와 **cglib을 활용하여 AOP를 구현**하였습니다.
- dynamic jdk proxy는 **리플렉션과 인터페이스를 기반으로** 프록시를 동적으로 만들어줍니다. 따라서 인터페이스가 필수입니다.
- cglib은 **구체 클래스를 기반으로 바이트코드를 조작하여** 프록시를 동적으로 생성해줍니다. 하지만 상속을 기반으로 하기 때문에 클래스에 final이나 private과 같은 경우 aop를 적용할 수 없다는 단점이 있습니다. **dynamic jdk proxy**는 **동적으로 리플렉션**을 사용해서 클래스 정보를 받아 **위빙하기 때문에 Dynamic Proxy에 비해 퍼포먼스가 우수하다는 장점**이 있다.
- proxy factory는 **동적으로 타겟에 대한 프록시를 생성해주는 클래스**입니다. 인터페이스가 있으면 jdk dynamic proxy를 구체 클래스가 있으면 cglib을 사용합니다.

AspectJ
- **컴파일 타임**, **로드 타임**, **런타임**에 **위빙(Weaving) 작업**을 지원하여 더 강력하고 유연한 AOP를 구현할 수 있습니다.

**로드 타임 위빙**
- 클래스를 JVM에 로드할 때 바이트코드를 변경.

**AspectJ를 사용하는 이유**

1. **스프링 빈 외의 객체에도 적용 가능**: 스프링 AOP는 스프링 컨테이너에 등록된 빈에만 적용되지만, AspectJ는 모든 객체에 적용 가능합니다.

**@Aspect**
- 어드바이저

**@Around**
- 포인트컷

**AspectJ란?**

• **AspectJ**는 **Aspect-Oriented Programming(AOP)**을 위한 독립적인 프레임워크이자 언어 확장입니다.

• 스프링 AOP와 달리, **컴파일 타임**, **로드 타임**, **런타임**에 위빙(Weaving) 작업을 지원하여 더 강력하고 유연한 AOP를 구현할 수 있습니다.

• 스프링 AOP는 **런타임 프록시 기반**으로 작동하지만, AspectJ는 **바이트코드 조작**으로 더 정교한 AOP를 제공합니다.